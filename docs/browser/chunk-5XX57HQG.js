import{a as G,b as C}from"./chunk-7RAMETKJ.js";import{a as q,b as z,c as D,d as R,e as B,h as u}from"./chunk-YZO25TB2.js";import{A as S,Aa as h,Ca as M,D as g,F as O,G as P,J as v,Ja as F,K as y,Ma as $,U as k,V as c,Va as N,Xa as V,_ as I,aa as p,e as w,fa as E,ga as T,ha as n,ia as o,ja as x,ka as b,ma as d,na as f,ua as s,va as l,x as _,xa as j}from"./chunk-QIR5U3J5.js";var J=(r,t)=>t.id;function K(r,t){if(r&1){let a=b();n(0,"button",12),d("click",function(){v(a);let e=f().$implicit,m=f();return y(m.removeFromCart(e))}),n(1,"mat-icon"),s(2,"remove"),o()()}}function L(r,t){if(r&1){let a=b();n(0,"mat-card",6),x(1,"img",8),n(2,"mat-card-content",9)(3,"div",10)(4,"h5"),s(5),o(),n(6,"span"),s(7),h(8,"currency"),o()(),n(9,"div",11)(10,"div",10)(11,"button",12),d("click",function(){let e=v(a).$implicit,m=f();return y(m.addToCart(e))}),n(12,"mat-icon"),s(13,"add"),o()()(),n(14,"div",13),s(15),o(),n(16,"div",14),I(17,K,3,0,"button",15),o()()()()}if(r&2){let a=t.$implicit;c(),p("src",a.thumbnail,k),c(4),l(a.name),c(2),l(M(8,5,a.price,"EGP","symbol-narrow")),c(8),l(a.qnt),c(2),p("ngIf",a.qnt)}}var U=(()=>{let t=class t{constructor(){this.destroy$=new w,this.myCart=[],this._router=g(N),this.cartService=g(C)}ngOnInit(){this.getMyCart()}getMyCart(){this.cartService.getMyCartData().pipe(_(this.destroy$)).subscribe(i=>{this.myCart=i})}addToCart(i){this.cartService.addItemToCart(i)}removeFromCart(i){this.cartService.removeItemFromCart(i)}orderNow(){let i=this.myCart.map(e=>({itemId:e.id,quantity:e.qnt}));this.cartService.makeOrder(Number(localStorage.getItem("restId"))??1,i).pipe(_(this.destroy$)).subscribe(e=>{e?.status=="your order is being processed"&&(this.cartService.removeCart(),this._router.navigate(["/"]))},e=>{e.status==200&&(this.cartService.removeCart(),this._router.navigate(["/"]))})}back(){history.back()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O({type:t,selectors:[["app-my-cart"]],standalone:!0,features:[j],decls:14,vars:6,consts:[[1,"w-100","d-flex","flex-column"],[1,"d-flex","flex-row","justify-content-between"],[1,"d-flex","flex-row","flex-grow-1"],["src","assets/photos/arrow.png",1,"me-3",3,"click"],[3,"title"],[1,"d-flex","flex-row","flex-wrap","justify-content-between","pt-5","cart"],["appearance","outlined",1,"d-flex","flex-row","align-items-center","w-100","my-1","p-3"],[1,"order",3,"click"],["mat-card-image","",3,"src"],[1,"pb-0","w-100","d-flex","justify-content-between"],[1,"d-flex","flex-column","justify-content-between"],[1,"controls"],["mat-icon-button","",1,"btn","d-flex","p-1",3,"click"],[1,"d-flex","justify-content-center","p-1"],[1,"d-flex","justify-content-between"],["mat-icon-button","","class","btn d-flex p-1",3,"click",4,"ngIf"]],template:function(e,m){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),d("click",function(){return m.back()}),o(),x(4,"app-title",4),o()(),n(5,"div",5),E(6,L,18,9,"mat-card",6,J),o(),n(8,"div",7),d("click",function(){return m.orderNow()}),n(9,"span"),s(10,"Order"),o(),n(11,"span"),s(12),h(13,"currency"),o()()()),e&2&&(c(4),p("title","cart"),c(2),T(m.myCart),c(6),l(M(13,2,m.cartService.getTotalPrice(),"EGP","symbol-narrow")))},dependencies:[u,F,q,$,B,z,D,R,G],styles:[".cart[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background-color:#333;color:#fff}.cart[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30vw;height:15vh;border-radius:8px;object-fit:cover}.cart[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{font-family:inter;font-weight:400}.cart[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:4vw}.cart[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:3vw}.cart[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#fff;border:none;border-radius:2vw}.order[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000040;background:#4a4a4a;position:absolute;bottom:5vh;padding:2vh 3vw;display:flex;justify-content:space-between;width:92vw;border-radius:2vw;cursor:pointer}.order[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:inter;color:#fff;font-weight:500;font-size:4vw}"]});let r=t;return r})();var Q=[{path:"",component:U}],pt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P({type:t}),t.\u0275inj=S({providers:[C],imports:[u,V.forChild(Q)]});let r=t;return r})();export{pt as CartModule};
